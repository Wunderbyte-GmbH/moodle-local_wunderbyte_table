define("local_wunderbyte_table/search",["exports","core/templates"],(function(_exports,_templates){var obj;
/*
   * @package    local_wunderbyte_table
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.toggleCheckbox=_exports.setVisibility=_exports.searchInput=_exports.renderSearchbox=_exports.renderFilter=_exports.init=_exports.getChecked=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};var checked={},categories=[],allElements=[],elementToHideSelector="",listContainerSelector="",elementToSearchSelector="";_exports.init=(listContainer,elementToHide,elementToSearch)=>{console.log(listContainerSelector,elementToHide,elementToSearch),elementToHideSelector=elementToHide,listContainerSelector=listContainer,elementToSearchSelector=elementToSearch};const searchInput=(inputElement,elementToHide,elementToSearch)=>{let filter,li,a,i,txtValue;for(filter=inputElement.value.toUpperCase(),console.log(filter),li=document.querySelectorAll(elementToHide),console.log(li),i=0;i<li.length;i++)a=elementToSearch?li[i].querySelector(elementToSearch):li[i],txtValue=a.textContent||a.innerText,console.log(txtValue),txtValue.toUpperCase().indexOf(filter)>-1?li[i].style.display="":li[i].style.display="none"};_exports.searchInput=searchInput;const toggleCheckbox=e=>{getChecked(e.target.name),setVisibility()};_exports.toggleCheckbox=toggleCheckbox;const getChecked=name=>{checked[name]=Array.from(document.querySelectorAll("input[name="+name+"]:checked")).map((function(el){return el.value})),console.log("checked",checked)};_exports.getChecked=getChecked;const setVisibility=()=>{console.log(categories),allElements.forEach((function(el){let display=!0;categories.forEach((function(c){!checked[c].length||Array.from(Object.values(el.dataset)).filter((x=>checked[c].includes(x))).length||(display=!1)})),el.style.display=display?"block":"none"}))};_exports.setVisibility=setVisibility;_exports.renderFilter=(filterjson,idstring)=>{console.log("filterjson",filterjson),_templates.default.renderForPromise("local_wunderbyte_table/filter",filterjson).then((_ref=>{let{html:html}=_ref;console.log("renderFilter",html);const selector=".wunderbyte_table_container_"+idstring;console.log("selector",selector);const container=document.querySelector(selector);console.log(container),container.insertAdjacentHTML("afterbegin",html),function(selector){console.log("initializeCheckboxes "),console.log(selector+" "+elementToHideSelector);const listContainer=document.querySelector(selector),allCheckboxes=listContainer.querySelectorAll("input[type=checkbox]");if(allElements=document.querySelectorAll(selector+" "+elementToHideSelector),!allCheckboxes)return;console.log("allCheckboxes ",allCheckboxes),listContainer.querySelectorAll(".form-group").forEach((e=>{categories.push(e.getAttribute("name")),getChecked(e.getAttribute("name"))})),allCheckboxes.forEach((el=>{el.addEventListener("change",toggleCheckbox)})),console.log(allElements)}(selector)})).catch((e=>{console.log(e)}))};_exports.renderSearchbox=idstring=>{_templates.default.renderForPromise("local_wunderbyte_table/search").then((_ref2=>{let{html:html}=_ref2;console.log("renderSearchbox",html);const selector=".wunderbyte_table_container_"+idstring;console.log("selector",selector);const container=document.querySelector(selector);console.log(container),container.insertAdjacentHTML("afterbegin",html),function(){const inputElement=document.querySelector(listContainerSelector+" input.search");if(!inputElement)return;inputElement.addEventListener("keyup",(()=>{searchInput(inputElement,elementToHideSelector,elementToSearchSelector)}))}()})).catch((e=>{console.log(e)}))}}));

//# sourceMappingURL=search.min.js.map
define ("local_wunderbyte_table/search",["exports","core/templates","local_wunderbyte_table/init"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.initializeSearch=d;a.getFilterOjects=f;a.initializeCheckboxes=g;a.renderSearchbox=a.renderFilter=a.setVisibility=a.getChecked=a.toggleCheckbox=a.searchInput=a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var h={},i=[],j=[],k="",l="",m="",n="",o="";a.init=function init(a,b,c){console.log(a,"elementToHide: ",b,"elementToSearch:",c);k=b;l=a;m=c};var p=function(b,c,d){var e,f,g,h,j;e=b.value.toUpperCase();f=document.querySelectorAll(c);for(h=0;h<f.length;h++){if(d){g=f[h].querySelector(d)}else{g=f[h]}j=g.textContent||g.innerText;if(-1<j.toUpperCase().indexOf(e)){f[h].style.display=""}else{f[h].style.display="none"}}};a.searchInput=p;var q=function(a){console.log("checked",a.target.name);r(a.target.name);var b=f();console.log("reload from filter ",b);(0,c.callLoadData)(n,o,0,null,null,null,null,null,b);s()};a.toggleCheckbox=q;var r=function(a){h[a]=Array.from(document.querySelectorAll("input[name="+a+"]:checked")).map(function(a){return a.value})};a.getChecked=r;var s=function(){j.forEach(function(a){var b=!0;i.forEach(function(d){var c=h[d].length?Array.from(Object.values(a.dataset)).filter(function(a){return h[d].includes(a)}).length:!0;if(!c){b=!1}});if(b){a.style.display="block"}else{a.style.display="none"}})};a.setVisibility=s;var t=function(a,c,d){console.log(c);n=c;var e=".wunderbyte_table_container_"+n,f=document.querySelector(e),h=f.querySelector(".wunderbyteTableFilter");if(h){return}b.default.renderForPromise("local_wunderbyte_table/filter",a).then(function(a){var b=a.html;console.log("encodedtable: ",d);f.insertAdjacentHTML("afterbegin",b);g(e,n,d)}).catch(function(a){console.log(a)})};a.renderFilter=t;var u=function(a){var c=".wunderbyte_table_container_"+a,e=document.querySelector(c),f=e.querySelector("input.search");if(f){return}b.default.renderForPromise("local_wunderbyte_table/search",[]).then(function(a){var b=a.html;e.insertAdjacentHTML("afterbegin",b);d(c)}).catch(function(a){console.log(a)})};a.renderSearchbox=u;function d(){var a=document.querySelector(l+" input.search");if(!a){return}if(!a.dataset.initialized){a.addEventListener("keyup",function(){p(a,k,m);a.dataset.initialized=!0})}}function f(){return JSON.stringify(h)}function g(a,b,c){o=c;n=b;var d=document.querySelector(a+" .wunderbyteTableFilter");if(d.dataset.initialized){return}var e=d.querySelectorAll("input[type=checkbox]");j=document.querySelectorAll(a+" "+k);if(!e){return}d.querySelectorAll(".form-group").forEach(function(a){i.push(a.getAttribute("name"));r(a.getAttribute("name"))});e.forEach(function(a){a.addEventListener("change",q)});d.dataset.initialized=!0}});
//# sourceMappingURL=search.min.js.map

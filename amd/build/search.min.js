define ("local_wunderbyte_table/search",["exports","core/templates","local_wunderbyte_table/init"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.renderSearchbox=a.renderFilter=a.setVisibility=a.getChecked=a.toggleCheckbox=a.searchInput=a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);var h={},i=[],j=[],k="",l="",m="",n="",o="";a.init=function init(a,b,c){console.log(a,"elementToHide: ",b,"elementToSearch:",c);k=b;l=a;m=c};var p=function(b,c,d){var e,f,g,h,j;e=b.value.toUpperCase();f=document.querySelectorAll(c);for(h=0;h<f.length;h++){if(d){g=f[h].querySelector(d)}else{g=f[h]}j=g.textContent||g.innerText;if(-1<j.toUpperCase().indexOf(e)){f[h].style.display=""}else{f[h].style.display="none"}}};a.searchInput=p;var q=function(a){console.log("checked",a.target.name);r(a.target.name);var b=f();console.log(b);(0,c.callLoadData)(n,o,null,null,null,null,null,null,b);s()};a.toggleCheckbox=q;var r=function(a){h[a]=Array.from(document.querySelectorAll("input[name="+a+"]:checked")).map(function(a){return a.value})};a.getChecked=r;var s=function(){j.forEach(function(a){var b=!0;i.forEach(function(d){var c=h[d].length?Array.from(Object.values(a.dataset)).filter(function(a){return h[d].includes(a)}).length:!0;if(!c){b=!1}});if(b){a.style.display="block"}else{a.style.display="none"}})};a.setVisibility=s;var t=function(a,c){b.default.renderForPromise("local_wunderbyte_table/filter",a).then(function(a){var b=a.html;n=c;var d=".wunderbyte_table_container_"+n,e=document.querySelector(d);o=e.querySelector("#a"+n).dataset.encodedtable;e.insertAdjacentHTML("afterbegin",b);g(d)}).catch(function(a){console.log(a)})};a.renderFilter=t;var u=function(a){b.default.renderForPromise("local_wunderbyte_table/search",[]).then(function(b){var c=b.html,e=".wunderbyte_table_container_"+a,f=document.querySelector(e);f.insertAdjacentHTML("afterbegin",c);d(e)}).catch(function(a){console.log(a)})};a.renderSearchbox=u;function d(){var a=document.querySelector(l+" input.search");if(!a){return}a.addEventListener("keyup",function(){p(a,k,m)})}function f(){return JSON.stringify(h)}function g(a){var b=document.querySelector(a),c=b.querySelectorAll("input[type=checkbox]");j=document.querySelectorAll(a+" "+k);if(!c){return}b.querySelectorAll(".form-group").forEach(function(a){i.push(a.getAttribute("name"));r(a.getAttribute("name"))});c.forEach(function(a){a.addEventListener("change",q)})}});
//# sourceMappingURL=search.min.js.map

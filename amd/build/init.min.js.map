{"version":3,"sources":["../src/init.js"],"names":["idstring","encodedtable","substring","element","document","getElementById","dataset","callLoadData","loading","init","respondToVisibility","callback","observer","MutationObserver","isHidden","disconnect","parentElement","observe","attributes","el","style","window","getComputedStyle","display","visibility","page","tsort","thide","tshow","tdir","treset","filterobjects","searchtext","table","spinner","querySelector","classList","remove","add","Ajax","call","methodname","args","done","res","jsonobject","JSON","parse","content","console","log","Templates","renderForPromise","template","then","html","js","frag","firstChild","removeChild","lastChild","appendNodeContents","activepage","getAttribute","replaceDownloadLink","replaceResetTableLink","replacePaginationLinks","replaceSortColumnLinks","catch","ex","Notification","addNotification","message","type","filterjson","fail","err","node","createElement","textnode","createTextNode","appendChild","arrayOfItems","querySelectorAll","forEach","item","sortid","sortorder","setAttribute","addEventListener","length","classofelement","indexOf","listOfChildren","subitem","arrayOfPageItems","pageNumber","pagenumber","tagName","newnode"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\nimport Templates from 'core/templates';\nimport Notification from 'core/notification';\n\nimport {renderFilter, renderSearchbox} from 'local_wunderbyte_table/search';\n\nvar loading = false;\n\n/**\n * Gets called from mustache template.\n * @param {string} idstring\n * @param {string} encodedtable\n */\nexport const init = (idstring, encodedtable) => {\n\n    if (idstring && encodedtable) {\n        respondToVisibility(idstring, encodedtable, callLoadData);\n    }\n};\n\n/**\n * React on visibility change.\n * @param {string} idstring\n * @param {string} encodedtable\n * @param {function} callback\n */\nfunction respondToVisibility(idstring, encodedtable, callback) {\n    let element = document.getElementById('a' + idstring);\n\n    if (element) {\n        element.dataset.encodedtable = encodedtable;\n    } else {\n        // If we don't find an element, we abort.\n        return;\n    }\n    var observer = new MutationObserver(function() {\n        if (!isHidden(element)) {\n            this.disconnect();\n            callback(idstring, encodedtable);\n        }\n    });\n\n    // We look if we find a hidden parent. If not, we load right away.\n    while (element !== null) {\n        if (!isHidden(element)) {\n            element = element.parentElement;\n        } else {\n            observer.observe(element, {attributes: true});\n            return;\n        }\n    }\n    callback(idstring, encodedtable);\n}\n\n/**\n * Function to reload a wunderbyte table from js.\n * Here we trim the idstring before we pass it to the calldatafunction.\n * @param {*} idstring\n * @param {*} encodedtable\n */\nexport function wbTableReload(idstring, encodedtable = null) {\n\n\n    // We need to trim the first character. We use the a to make sure no number is in first place due to random generation.\n    idstring = idstring.substring(1);\n\n    let element = document.getElementById('a' + idstring);\n\n    if (!element) {\n\n        return;\n    }\n\n    if (!encodedtable) {\n        encodedtable = element.dataset.encodedtable;\n\n        if (!encodedtable) {\n            return;\n        }\n    }\n\n    callLoadData(idstring, encodedtable);\n}\n\n/**\n * Function to check visibility of element.\n * @param {*} el\n * @returns {boolean}\n */\n export const isHidden = (el) => {\n    var style = window.getComputedStyle(el);\n    return ((style.display === 'none') || (style.visibility === 'hidden'));\n};\n\n/**\n * Reloads the rendered table and sets it to the div with the right identifier.\n * @param {string} idstring\n * @param {string} encodedtable\n * @param {null|int} page\n * @param {null|string} tsort\n * @param {null|string} thide\n * @param {null|string} tshow\n * @param {null|int} tdir\n * @param {null|int} treset\n * @param {null|string} filterobjects\n * @param {null|string} searchtext\n */\nexport const callLoadData = (\n    idstring,\n    encodedtable,\n    page = null,\n    tsort = null,\n    thide = null,\n    tshow = null,\n    tdir = null,\n    treset = null,\n    filterobjects = null,\n    searchtext = null) => {\n\n    let table = document.getElementById('a' + idstring);\n\n    // This is now the individual spinner from the wunderbyte table template.\n    let spinner = document.querySelector('#a' + idstring + 'spinner .spinner-border');\n\n    if (spinner) {\n        spinner.classList.remove('hidden');\n    }\n    if (table) {\n        table.classList.add('hidden');\n    }\n\n    loading = true;\n\n    Ajax.call([{\n        methodname: \"local_wunderbyte_table_load_data\",\n        args: {\n            'encodedtable': encodedtable,\n            'page': page,\n            'tsort': tsort,\n            'thide': thide,\n            'tshow': tshow,\n            'tdir': tdir,\n            'treset': treset,\n            'filterobjects': filterobjects,\n            'searchtext': searchtext\n        },\n        done: function(res) {\n\n            const jsonobject = JSON.parse(res.content);\n\n            // eslint-disable-next-line no-console\n            console.log(jsonobject);\n\n            Templates.renderForPromise(res.template, jsonobject).then(({html, js}) => {\n\n                const frag = document.querySelector('#a' + idstring);\n\n                while (frag.firstChild) {\n                    frag.removeChild(table.lastChild);\n                }\n\n                Templates.appendNodeContents('#a' + idstring, html, js);\n\n                if (!page) {\n                    const activepage = frag.querySelector('li.page-item active');\n                    if (activepage) {\n                        page = activepage.getAttribute('data-page-number');\n                    }\n                }\n\n                replaceDownloadLink(idstring, encodedtable, frag);\n                replaceResetTableLink(idstring, encodedtable, frag, page);\n                replacePaginationLinks(idstring, encodedtable, frag);\n                replaceSortColumnLinks(idstring, encodedtable, frag, page);\n\n                // When everything is done, we loaded fine.\n                loading = false;\n                // eslint-disable-next-line no-console\n                console.log(loading);\n\n                return true;\n            }).catch(ex => {\n                loading = false;\n                Notification.addNotification({\n                    message: 'failed rendering ' + ex,\n                    type: \"danger\"\n                });\n            });\n\n            renderSearchbox(idstring);\n\n            if (res.filterjson) {\n                const filterjson = JSON.parse(res.filterjson);\n                renderFilter(filterjson, idstring);\n            }\n\n            if (spinner) {\n                spinner.classList.add('hidden');\n            }\n            if (table) {\n                table.classList.remove('hidden');\n            }\n            return true;\n        },\n        fail: function(err) {\n            // If we have an error, resetting the table might be enough. we do that.\n            // To avoid a loop, we only do this in special cases.\n            if ((treset != 1)) {\n                callLoadData(idstring, encodedtable, page, null, null, null, null, 1);\n            } else {\n                let node = document.createElement('DIV');\n                let textnode = document.createTextNode(err.message);\n                node.appendChild(textnode);\n                table.appendChild(node);\n                spinner.classList.add('hidden');\n                table.classList.remove('hidden');\n            }\n        }\n    }]);\n};\n\n/**\n * The rendered table has links we can't use. We replace them with eventlisteners and use the callLoadData function.\n * @param {string} idstring\n * @param {string} encodedtable\n * @param {DocumentFragment} frag\n * @param {int} page\n */\nfunction replaceSortColumnLinks(idstring, encodedtable, frag, page) {\n\n    var arrayOfItems = frag.querySelectorAll(\"th.header a\");\n\n    arrayOfItems.forEach(item => {\n        var sortid = item.getAttribute('data-sortby');\n        var sortorder = item.getAttribute('data-sortorder');\n        var thide = item.getAttribute('data-action') == 'hide' ? item.getAttribute('data-column') : null;\n        var tshow = item.getAttribute('data-action') == 'show' ? item.getAttribute('data-column') : null;\n\n        item.setAttribute('href', '#');\n        item.addEventListener('click', () => {\n            callLoadData(idstring, encodedtable, page, sortid, thide, tshow, sortorder);\n        });\n    });\n}\n\n/**\n * The rendered table has links we can't use. We replace them with eventlisteners and use the callLoadData function.\n * @param {string} idstring\n * @param {string} encodedtable\n * @param {DocumentFragment} frag\n * @param {int} page\n */\nfunction replaceResetTableLink(idstring, encodedtable, frag, page) {\n    var arrayOfItems = frag.querySelectorAll(\"div.resettable\");\n\n    if (!arrayOfItems || arrayOfItems.length == 0) {\n        return;\n    }\n    arrayOfItems.forEach(item => {\n        var classofelement = item.getAttribute('class');\n        if (classofelement.indexOf('resettable') >= 0) {\n            let listOfChildren = item.querySelectorAll('a');\n            listOfChildren.forEach(subitem => {\n                subitem.setAttribute('href', '#');\n                subitem.addEventListener('click', () => {\n                    callLoadData(idstring, encodedtable, page, null, null, null, null, 1);\n                });\n            });\n        }\n    });\n}\n\n/**\n * The rendered table has links we can't use. We replace them with eventlisteners and use the callLoadData function.\n * @param {string} idstring\n * @param {string} encodedtable\n * @param {DocumentFragment} frag\n */\nfunction replacePaginationLinks(idstring, encodedtable, frag) {\n    var arrayOfPageItems = frag.querySelectorAll(\".page-item\");\n\n    if (!arrayOfPageItems || arrayOfPageItems.length == 0) {\n        return;\n    }\n    arrayOfPageItems.forEach(item => {\n\n        let pageNumber = item.dataset.pagenumber;\n\n        if (pageNumber) {\n            --pageNumber;\n            item.addEventListener('click', () => {\n                callLoadData(idstring, encodedtable, pageNumber);\n            });\n        }\n    });\n}\n\n/**\n * The rendered table has links we can't use. We replace them with eventlisteners and use the callLoadData function.\n * @param {string} idstring\n * @param {string} encodedtable\n * @param {DocumentFragment} frag\n */\nfunction replaceDownloadLink(idstring, encodedtable, frag) {\n\n    var arrayOfItems = frag.querySelectorAll(\"form\");\n\n    arrayOfItems.forEach(item => {\n        if (item.tagName == 'FORM') {\n            item.setAttribute('method', 'POST');\n            let newnode = document.createElement('input');\n            newnode.setAttribute('type', 'hidden');\n            newnode.setAttribute('name', 'encodedtable');\n            newnode.setAttribute('value', encodedtable);\n            item.appendChild(newnode);\n        }\n    });\n}"],"file":"init.min.js"}
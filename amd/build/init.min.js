define ("local_wunderbyte_table/init",["exports","core/ajax"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.replaceDownloadLink=a.replacePaginationLinks=a.replaceResetTableLink=a.replaceSortColumnLinks=a.callLoadData=a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);a.init=function init(a){c(a)};var c=function(a){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null,j=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null,k=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null,l=6<arguments.length&&arguments[6]!==void 0?arguments[6]:null,m=document.getElementById("a"+a),n=document.querySelector("#a"+a+"spinner .spinner-border");n.classList.toggle("hidden");m.classList.toggle("hidden");var o=m.getAttribute("data-encodedtable");b.default.call([{methodname:"local_wunderbyte_table_load_data",args:{encodedtable:o,page:c,tsort:h,thide:i,tshow:j,tdir:k,treset:l},done:function done(b){var h=document.createRange().createContextualFragment(b.content);if(!c){var j=h.querySelector("li.page-item active");if(j){c=j.getAttribute("data-page-number")}}g(a,h);e(a,h,c);f(a,h);d(a,h,c);var i=document.getElementById("a"+a);while(i.firstChild){i.removeChild(i.lastChild)}i.appendChild(h);n.classList.toggle("hidden");i.classList.toggle("hidden")},fail:function fail(){n.classList.toggle("hidden");m.classList.toggle("hidden")}}])};a.callLoadData=c;var d=function(a,b,d){var e=b.querySelectorAll("th.header a");e.forEach(function(b){var e=b.getAttribute("data-sortby"),f=b.getAttribute("data-sortorder"),g="hide"==b.getAttribute("data-action")?b.getAttribute("data-column"):null,h="show"==b.getAttribute("data-action")?b.getAttribute("data-column"):null;b.setAttribute("href","#");b.addEventListener("click",function(){c(a,d,e,g,h,f)})})};a.replaceSortColumnLinks=d;var e=function(a,b,d){var e=b.querySelectorAll("div.resettable");if(!e||0==e.length){return}e.forEach(function(b){var e=b.getAttribute("class");if(0<=e.indexOf("resettable")){var f=b.querySelectorAll("a");f.forEach(function(b){b.setAttribute("href","#");b.addEventListener("click",function(){c(a,d,null,null,null,null,1)})})}})};a.replaceResetTableLink=e;var f=function(a,b){var d=b.querySelectorAll(".page-item");if(!d||0==d.length){return}d.forEach(function(b){var d=b.querySelector("a");if(!d){return}var e=d.getAttribute("href"),f;if(e!=void 0&&"#"!=e){var g=new URL(e),h=new URLSearchParams(g.search);f=h.get("page")}d.setAttribute("href","#");if(f){d.addEventListener("click",function(){c(a,f)})}})};a.replacePaginationLinks=f;var g=function(a,b){var c=document.getElementById("a"+a),d=c.getAttribute("data-encodedtable");d=encodeURIComponent(d);var e=b.querySelectorAll("form");e.forEach(function(a){if("FORM"==a.tagName){var b=document.createElement("input");b.setAttribute("type","hidden");b.setAttribute("name","encodedtable");b.setAttribute("value",d);a.appendChild(b)}})};a.replaceDownloadLink=g});
//# sourceMappingURL=init.min.js.map

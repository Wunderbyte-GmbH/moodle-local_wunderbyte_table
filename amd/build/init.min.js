define ("local_wunderbyte_table/init",["exports","core/ajax"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.replaceDownloadLink=a.replacePaginationLinks=a.replaceResetTableLink=a.replaceSortColumnLinks=a.callLoadData=a.init=void 0;b=function(a){return a&&a.__esModule?a:{default:a}}(b);a.init=function init(a,b){c(a,b,e)};function c(a,b,c){var e=document.getElementById("a"+a),f=new MutationObserver(function(){if(!d(e)){this.disconnect();c(a,b)}});while(null!==e){if(!d(e)){e=e.parentElement}else{f.observe(e,{attributes:!0});return}}c(a,b)}function d(a){var b=window.getComputedStyle(a);return"none"===b.display||"hidden"===b.visibility}var e=function(a,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null,k=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null,l=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null,m=6<arguments.length&&arguments[6]!==void 0?arguments[6]:null,n=7<arguments.length&&arguments[7]!==void 0?arguments[7]:null,o=document.getElementById("a"+a),p=document.querySelector("#a"+a+"spinner .spinner-border");p.classList.toggle("hidden");o.classList.toggle("hidden");b.default.call([{methodname:"local_wunderbyte_table_load_data",args:{encodedtable:c,page:d,tsort:j,thide:k,tshow:l,tdir:m,treset:n},done:function done(b){var e=document.createRange().createContextualFragment(b.content);if(!d){var k=e.querySelector("li.page-item active");if(k){d=k.getAttribute("data-page-number")}}i(a,c,e);g(a,e,d);h(a,e);f(a,e,d);var j=document.getElementById("a"+a);while(j.firstChild){j.removeChild(j.lastChild)}j.appendChild(e);p.classList.add("hidden");j.classList.remove("hidden");return!0},fail:function fail(b){if(1!=n){e(a,c,d,null,null,null,null,1)}else{var f=document.createElement("DIV"),g=document.createTextNode(b.message);f.appendChild(g);o.appendChild(f);p.classList.add("hidden");o.classList.remove("hidden")}}}])};a.callLoadData=e;var f=function(a,b,c){var d=b.querySelectorAll("th.header a");d.forEach(function(b){var d=b.getAttribute("data-sortby"),f=b.getAttribute("data-sortorder"),g="hide"==b.getAttribute("data-action")?b.getAttribute("data-column"):null,h="show"==b.getAttribute("data-action")?b.getAttribute("data-column"):null;b.setAttribute("href","#");b.addEventListener("click",function(){e(a,c,d,g,h,f)})})};a.replaceSortColumnLinks=f;var g=function(a,b,c){var d=b.querySelectorAll("div.resettable");if(!d||0==d.length){return}d.forEach(function(b){var d=b.getAttribute("class");if(0<=d.indexOf("resettable")){var f=b.querySelectorAll("a");f.forEach(function(b){b.setAttribute("href","#");b.addEventListener("click",function(){e(a,c,null,null,null,null,1)})})}})};a.replaceResetTableLink=g;var h=function(a,b){var c=b.querySelectorAll(".page-item");if(!c||0==c.length){return}c.forEach(function(b){var c=b.querySelector("a");if(!c){return}var d=c.getAttribute("href"),f;if(d!=void 0&&"#"!=d){var g=new URL(d),h=new URLSearchParams(g.search);f=h.get("page")}c.setAttribute("href","#");if(f){c.addEventListener("click",function(){e(a,f)})}})};a.replacePaginationLinks=h;var i=function(a,b,c){var d=c.querySelectorAll("form");d.forEach(function(a){if("FORM"==a.tagName){a.setAttribute("method","POST");var c=document.createElement("input");c.setAttribute("type","hidden");c.setAttribute("name","encodedtable");c.setAttribute("value",b);a.appendChild(c)}})};a.replaceDownloadLink=i});
//# sourceMappingURL=init.min.js.map

{"version":3,"file":"edittable.min.js","sources":["../src/edittable.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_shopping_cart\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport ModalForm from 'core_form/modalform';\nimport {get_string as getString} from 'core/str';\n\nconst SELECTORS = {\n    EDITTABLEBUTTON: ' .wb_edit_button',\n};\n\n/**\n * Init function.\n * @param {*} selector\n * @param {*} idstring\n * @param {*} encodedtable\n */\nexport function initializeEditTableButton(selector, idstring, encodedtable) {\n\n    const button = document.querySelector(selector + SELECTORS.EDITTABLEBUTTON);\n\n    if (!button) {\n        return;\n    }\n\n    // eslint-disable-next-line no-console\n    console.log('run initializeEditTableButton');\n\n    if (button.initialized) {\n        return;\n    } else {\n        button.initialized = true;\n    }\n\n    button.addEventListener('click', (e) => editTableModal(e, idstring, encodedtable));\n}\n\n/**\n * Edit Table Modal.\n * @param {*} event\n * @param {*} idstring\n * @param {*} encodedtable\n */\nexport function editTableModal(event, idstring, encodedtable) {\n\n    // We two parents up, we find the right element with the necessary information.\n    const element = event.target;\n\n    // eslint-disable-next-line no-console\n    console.log('closest', element);\n\n    // eslint-disable-next-line no-console\n    console.log('values ', idstring);\n\n    const modalForm = new ModalForm({\n\n        // Name of the class where form is defined (must extend \\core_form\\dynamic_form):\n        formClass: \"local_wunderbyte_table\\\\form\\\\edittable\",\n        // Add as many arguments as you need, they will be passed to the form:\n        args: {\n            idstring,\n            encodedtable,\n        },\n        // Pass any configuration settings to the modal dialogue, for example, the title:\n        modalConfig: {title: getString('customizewbtable', 'local_wunderbyte_table')},\n        // DOM element that should get the focus after the modal dialogue is closed:\n        returnFocus: element\n    });\n    // Listen to events if you want to execute something on form submit.\n    // Event detail will contain everything the process() function returned:\n    modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, response => {\n\n        // eslint-disable-next-line no-console\n        console.log('form submitted response: ', response);\n\n        window.location.reload();\n    });\n\n    // Show the form.\n    modalForm.show();\n\n}\n"],"names":["obj","selector","idstring","encodedtable","button","document","querySelector","SELECTORS","EDITTABLEBUTTON","console","log","initialized","addEventListener","e","editTableModal","_modalform","__esModule","default","event","element","target","modalForm","ModalForm","formClass","args","modalConfig","title","getString","returnFocus","events","FORM_SUBMITTED","response","window","location","reload","show"],"mappings":"2HAoB4C,IAAAA;;;;;uIAarC,SAAmCC,SAAUC,SAAUC,cAE1D,MAAMC,OAASC,SAASC,cAAcL,SAAWM,UAAUC,iBAE3D,IAAKJ,OACD,OAMJ,GAFAK,QAAQC,IAAI,iCAERN,OAAOO,YACP,OAEAP,OAAOO,aAAc,EAGzBP,OAAOQ,iBAAiB,SAAUC,GAAMC,eAAeD,EAAGX,SAAUC,eACxE,EA/BAY,YAA4Cf,IAA5Ce,aAA4Cf,IAAAgB,WAAAhB,IAAAiB,CAAAA,QAAAjB,KAG5C,MAAMO,UAAY,CACdC,gBAAiB,oBAmCd,SAASM,eAAeI,MAAOhB,SAAUC,cAG5C,MAAMgB,QAAUD,MAAME,OAGtBX,QAAQC,IAAI,UAAWS,SAGvBV,QAAQC,IAAI,UAAWR,UAEvB,MAAMmB,UAAY,IAAIC,WAAAA,QAAU,CAG5BC,UAAW,0CAEXC,KAAM,CACFtB,kBACAC,2BAGJsB,YAAa,CAACC,OAAO,EAAAC,KAAAA,YAAU,mBAAoB,2BAEnDC,YAAaT,UAIjBE,UAAUT,iBAAiBS,UAAUQ,OAAOC,gBAAgBC,WAGxDtB,QAAQC,IAAI,4BAA6BqB,UAEzCC,OAAOC,SAASC,QAAQ,IAI5Bb,UAAUc,MAEd,CAAC"}
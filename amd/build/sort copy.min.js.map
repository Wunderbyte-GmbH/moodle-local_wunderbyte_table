{"version":3,"file":"sort copy.min.js","sources":["../src/sort copy.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {callLoadData} from 'local_wunderbyte_table/init';\nimport {getFilterOjects, getSearchInput} from 'local_wunderbyte_table/search';\n\nvar listContainerSelector = '';\n\n/**\n * Store some params globally.\n * @param {string} listContainer\n */\nexport const init = (listContainer) => {\n\n    // eslint-disable-next-line no-console\n    console.log(\"sort called \", listContainer);\n\n    listContainerSelector = listContainer;\n\n    initializeSort();\n\n};\n\n\n/**\n * Function to initialize the search after rendering the searchbox.\n * @param {*} listContainer\n * @param {*} idstring\n * @param {*} encodedtable\n * @returns {void}\n */\n export function initializeSort(listContainer, idstring, encodedtable) {\n\n  // eslint-disable-next-line no-console\n    console.log(\"soinitializeSortrt called \", listContainer);\n\n    const container = document.querySelector(listContainer);\n\n    const inputElement = container.querySelector('select.sortorder');\n\n\n\n    // eslint-disable-next-line no-console\n    console.log(\"encodedtable element found \", encodedtable);\n\n    if (!inputElement) {\n        return;\n    }\n\n    if (!inputElement.dataset.initialized) {\n\n      inputElement.dataset.initialized = true;\n\n      // eslint-disable-next-line no-console\n      console.log(\"sort called \", inputElement);\n\n      inputElement.addEventListener('change', (e) => {\n\n        // eslint-disable-next-line no-console\n        console.log(\"sort called \", e.target.value);\n\n        const sortcolumn = e.target.value;\n        if (sortcolumn) {\n\n          // eslint-disable-next-line no-console\n          console.log(\"we found the sortcolum \", sortcolumn, encodedtable);\n\n          const filterobjects = getFilterOjects();\n          const searchstring = getSearchInput();\n\n\n          callLoadData(idstring,\n            encodedtable,\n            0, // We set page to 0 because we need to start the container anew.\n            null,\n            null,\n            null,\n            null,\n            null,\n            filterobjects,\n            searchstring);\n        }\n      });\n    }\n}\n\n/**\n * Function to read the searchstring from the input leement.\n * @returns {null|string}\n */\nexport function getSortSelection() {\n\n  const inputElement = document.querySelector(listContainerSelector + ' select.sort');\n\n  if (!inputElement) {\n    return null;\n  }\n\n  return '';\n}\n"],"names":["document","querySelector","listContainerSelector","initializeSort","listContainer","idstring","encodedtable","console","log","inputElement","dataset","initialized","addEventListener","e","target","value","sortcolumn","filterobjects","searchstring"],"mappings":"uPA+GuBA,SAASC,cAAcC,sBAAwB,uBAG3D,WAGF;;;;;;IA5FLA,sBAAwB,YAyBXC,eAAeC,cAAeC,SAAUC,cAGrDC,QAAQC,IAAI,6BAA8BJ,qBAIpCK,aAFYT,SAASC,cAAcG,eAEVH,cAAc,oBAK7CM,QAAQC,IAAI,8BAA+BF,cAEtCG,eAIAA,aAAaC,QAAQC,cAExBF,aAAaC,QAAQC,aAAc,EAGnCJ,QAAQC,IAAI,eAAgBC,cAE5BA,aAAaG,iBAAiB,UAAWC,IAGvCN,QAAQC,IAAI,eAAgBK,EAAEC,OAAOC,aAE/BC,WAAaH,EAAEC,OAAOC,SACxBC,WAAY,CAGdT,QAAQC,IAAI,0BAA2BQ,WAAYV,oBAE7CW,eAAgB,6BAChBC,cAAe,mDAGRb,SACXC,aACA,EACA,KACA,KACA,KACA,KACA,KACAW,cACAC,kCApESd,gBAGjBG,QAAQC,IAAI,eAAgBJ,eAE5BF,sBAAwBE,cAExBD"}
{"version":3,"file":"filtersearch.min.js","sources":["../src/filtersearch.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_wunderbyte_table\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\n/**\n * Render the checkboxes for the filer.\n * @param {string} idstring\n */\nexport const renderSearchbox = (idstring) => {\n\n    const selector = \".wunderbyte_table_container_\" + idstring;\n    const tablecontainer = document.querySelector(selector);\n    if (!tablecontainer) {\n        return;\n    }\n    const filtercontainer = tablecontainer.querySelector(\".wunderbyteTableFilter\");\n    if (!filtercontainer) {\n        return;\n    }\n    let searchfields = filtercontainer.querySelectorAll(\"input.search\");\n\n    // eslint-disable-next-line no-console\n    console.log(\"filtersearch init\", searchfields);\n\n    if (!searchfields) {\n        return;\n    }\n};\n\n\n/**\n * Function to initialize the search after rendering each searchfield.\n * @param {*} containerselector\n */\nexport function initializeFilterSearch(containerselector) {\n\n    const tablecontainer = document.querySelector(containerselector);\n    if (!tablecontainer) {\n        return;\n    }\n    const filtercontainer = tablecontainer.querySelector(\".wunderbyteTableFilter\");\n\n    if (!filtercontainer) {\n        return;\n    }\n    var inputElements = filtercontainer.querySelectorAll('input.search');\n\n    if (!inputElements) {\n        return;\n    }\n\n    inputElements.forEach(function(inputElement) {\n        if (!inputElement.dataset.initialized) {\n            inputElement.dataset.initialized = true;\n\n            // Get all records of filter.\n            const parentElement = inputElement.parentNode;\n            let records = parentElement.querySelectorAll('input.filterelement.form-check-input[type=\"checkbox\"]');\n\n            // Display searchfield with minimum of 13 records.\n            if (records.length > 12) {\n                inputElement.removeAttribute('hidden');\n            }\n\n            inputElement.addEventListener('keyup', () => {\n\n                let searchstring = null;\n                if (inputElement.value.length > 2\n                    || inputElement.value.length === 0) {\n                    searchstring = inputElement.value;\n                }\n\n                // Check if value of records contains searchstring.\n                // If countained, display it, else hide.\n                records.forEach(function(record) {\n                    let value = record.value.toLowerCase();\n                    const listelement = record.parentNode;\n                    if (value.includes(searchstring.toLowerCase())) {\n                        listelement.removeAttribute('hidden');\n                    } else {\n                        listelement.setAttribute('hidden', '');\n                    }\n                });\n                return;\n            });\n        }\n    }\n    );\n}\n"],"names":["containerselector","tablecontainer","document","querySelector","filtercontainer","inputElements","querySelectorAll","forEach","inputElement","dataset","initialized","records","parentNode","length","removeAttribute","addEventListener","searchstring","value","record","toLowerCase","listelement","includes","setAttribute","_exports","renderSearchbox","idstring","selector","searchfields","console","log"],"mappings":"qKAoDO,SAAgCA,mBAEnC,MAAMC,eAAiBC,SAASC,cAAcH,mBAC9C,IAAKC,eACD,OAEJ,MAAMG,gBAAkBH,eAAeE,cAAc,0BAErD,IAAKC,gBACD,OAEJ,IAAIC,cAAgBD,gBAAgBE,iBAAiB,gBAErD,IAAKD,cACD,OAGJA,cAAcE,SAAQ,SAASC,cAC3B,IAAKA,aAAaC,QAAQC,YAAa,CACnCF,aAAaC,QAAQC,aAAc,EAInC,IAAIC,QADkBH,aAAaI,WACPN,iBAAiB,yDAGzCK,QAAQE,OAAS,IACjBL,aAAaM,gBAAgB,UAGjCN,aAAaO,iBAAiB,SAAS,KAEnC,IAAIC,aAAe,MACfR,aAAaS,MAAMJ,OAAS,GACK,IAA9BL,aAAaS,MAAMJ,UACtBG,aAAeR,aAAaS,OAKhCN,QAAQJ,SAAQ,SAASW,QACrB,IAAID,MAAQC,OAAOD,MAAME,cACzB,MAAMC,YAAcF,OAAON,WACvBK,MAAMI,SAASL,aAAaG,eAC5BC,YAAYN,gBAAgB,UAE5BM,YAAYE,aAAa,SAAU,GAE3C,GACA,GAER,CACJ,GAEJ,kCA7DEC,SAAAC,gBAnB8BC,WAE5B,MAAMC,SAAW,+BAAiCD,SAC5CxB,eAAiBC,SAASC,cAAcuB,UAC9C,IAAKzB,eACD,OAEJ,MAAMG,gBAAkBH,eAAeE,cAAc,0BACrD,IAAKC,gBACD,OAEJ,IAAIuB,aAAevB,gBAAgBE,iBAAiB,gBAGpDsB,QAAQC,IAAI,oBAAqBF,aAIjC,CA8DH"}
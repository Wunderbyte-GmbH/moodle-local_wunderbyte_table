{"version":3,"file":"filterfieldsreload.min.js","sources":["../src/filterfieldsreload.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    local_shopping_cart\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\n\n/**\n * Initialise it all.\n */\nexport const init = () => {\n    const observeDOMChanges = (callback) => {\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.addedNodes) {\n                    mutation.addedNodes.forEach((node) => {\n                        if (node instanceof HTMLElement && node.querySelector('[name=\"filter_options\"]')) {\n                            callback(node.querySelector('[name=\"filter_options\"]'));\n                        }\n                    });\n                }\n            });\n        });\n        observer.observe(document.body, {childList: true, subtree: true});\n    };\n\n    observeDOMChanges((dropdown) => {\n        dropdown.addEventListener('change', (event) => {\n            const selectedValue = event.target.value;\n            Ajax.call([{\n                methodname: 'local_wunderbyte_table_get_filter_fields',\n                args: {filtertype: selectedValue},\n                done: (response) => {\n                    const placeholder = document.getElementById('filter-mandatory-fields');\n                    if (placeholder) {\n                        placeholder.innerHTML = response.html;\n                    }\n                },\n                fail: (error) => {\n                    // eslint-disable-next-line no-console\n                    console.error('Web service error:', error);\n                }\n            }]);\n        });\n    });\n};"],"names":["e","_ajax","__esModule","default","_exports","init","callback","dropdown","addEventListener","event","selectedValue","target","value","Ajax","call","methodname","args","filtertype","done","response","placeholder","document","getElementById","innerHTML","html","fail","error","console","MutationObserver","mutations","forEach","mutation","addedNodes","node","HTMLElement","querySelector","observe","body","childList","subtree"],"mappings":"qGAqB6B,IAAAA;;;;;kFAA7BC,OAA6BD,EAA7BC,QAA6BD,EAAAE,WAAAF,EAAAG,CAAAA,QAAAH,GAwC3BI,SAAAC,KAnCkBA,KACWC,sBAeRC,WACfA,SAASC,iBAAiB,UAAWC,QACjC,MAAMC,cAAgBD,MAAME,OAAOC,MACnCC,MAAIV,QAACW,KAAK,CAAC,CACPC,WAAY,2CACZC,KAAM,CAACC,WAAYP,eACnBQ,KAAOC,WACH,MAAMC,YAAcC,SAASC,eAAe,2BACxCF,cACAA,YAAYG,UAAYJ,SAASK,KACrC,EAEJC,KAAOC,QAEHC,QAAQD,MAAM,qBAAsBA,MAAM,IAE/C,GACL,EA/Be,IAAIE,kBAAkBC,YACnCA,UAAUC,SAASC,WACXA,SAASC,YACTD,SAASC,WAAWF,SAASG,OACrBA,gBAAgBC,aAAeD,KAAKE,cAAc,4BAClD7B,SAAS2B,KAAKE,cAAc,2BAChC,GAER,GACF,IAEGC,QAAQf,SAASgB,KAAM,CAACC,WAAW,EAAMC,SAAS,GAqB7D,CACJ"}